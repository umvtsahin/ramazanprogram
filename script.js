const imsakiye = {
    "19 ≈ûubat": { imsak: "06:23", iftar: "18:50" },
    "20 ≈ûubat": { imsak: "06:22", iftar: "18:52" },
    "21 ≈ûubat": { imsak: "06:20", iftar: "18:53" },
    "22 ≈ûubat": { imsak: "06:19", iftar: "18:54" },
    "23 ≈ûubat": { imsak: "06:17", iftar: "18:55" },
    "24 ≈ûubat": { imsak: "06:16", iftar: "18:56" },
    "25 ≈ûubat": { imsak: "06:15", iftar: "18:58" },
    "26 ≈ûubat": { imsak: "06:13", iftar: "18:59" },
    "27 ≈ûubat": { imsak: "06:12", iftar: "19:00" },
    "28 ≈ûubat": { imsak: "06:10", iftar: "19:01" },
    "1 Mart": { imsak: "06:09", iftar: "19:02" },
    "2 Mart": { imsak: "06:07", iftar: "19:03" },
    "3 Mart": { imsak: "06:06", iftar: "19:05" },
    "4 Mart": { imsak: "06:04", iftar: "19:06" },
    "5 Mart": { imsak: "06:03", iftar: "19:07" },
    "6 Mart": { imsak: "06:01", iftar: "19:08" },
    "7 Mart": { imsak: "05:59", iftar: "19:09" },
    "8 Mart": { imsak: "05:58", iftar: "19:10" },
    "9 Mart": { imsak: "05:56", iftar: "19:11" },
    "10 Mart": { imsak: "05:54", iftar: "19:13" },
    "11 Mart": { imsak: "05:53", iftar: "19:14" },
    "12 Mart": { imsak: "05:51", iftar: "19:15" },
    "13 Mart": { imsak: "05:49", iftar: "19:16" },
    "14 Mart": { imsak: "05:48", iftar: "19:17" },
    "15 Mart": { imsak: "05:46", iftar: "19:18" },
    "16 Mart": { imsak: "05:44", iftar: "19:19" },
    "17 Mart": { imsak: "05:42", iftar: "19:20" },
    "18 Mart": { imsak: "05:41", iftar: "19:21" },
    "19 Mart": { imsak: "05:39", iftar: "19:22" }
};

const dersProgrami = {
    "19 ≈ûubat": [
        { saat: "09:30-10:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Fat-soluble vitamins II" },
        { saat: "10:30-11:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Water soluble vitamins" },
        { saat: "11:30-12:15", ad: "Medical Biology", hoca: "B√ºnyamin BULKURCUOƒûLU", detay: "Translation and Posttranslational Mechanisms, Ribosomal Structure and Properties" },
        { saat: "13:30-14:15", ad: "Physiology", hoca: "Ozan TORAMAN", detay: "Control Systems of the Body" },
        { saat: "14:30-15:15", ad: "Physiology", hoca: "Ozan TORAMAN", detay: "Water & Body Fluids Compartments (1/2)" },
        { saat: "15:30-16:15", ad: "Behavioral Sciences", hoca: "Esra SAVA≈û"},
        { saat: "16:30-17:15", ad: "Behavioral Sciences", hoca: "Esra SAVA≈û"}
    ],
    "20 ≈ûubat": [
        { saat: "10:30-12:15", ad: "Medical Skills Practice", hoca: "Mustafa YAZICIOƒûLU", detay: "Group I - Classroom A211" }
    ],
    "21 ≈ûubat": [
        {saat: "", ad: "Cumartesi - Tatil", hoca: ""}
    ],
    "22 ≈ûubat": [
        {saat: "", ad: "Pazar - Tatil", hoca: ""}
    ],
    "23 ≈ûubat": [
        {saat: "", ad: "Pazartesi - Ders Yok", hoca: ""}
    ],
    "24 ≈ûubat": [
        { saat: "09:30-10:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Nutritional importance and classification of bioelements" },
        { saat: "10:30-11:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Macroelements" },
        { saat: "11:30-12:15", ad: "Biophysics", hoca: "Esma Nur ZEYDANLI", detay: "Electrophysiologic research methods" },
        { saat: "13:30-14:15", ad: "Koordinat√∂r Toplantƒ±sƒ±", hoca: ""}
    ],
    "25 ≈ûubat": [
        {saat: "09:30-10:15", ad: "Medical Biology", hoca: "B√ºnyamin BULKURCUOƒûLU", detay: "Regulation of Gene Expression"},
        {saat: "10:30-11:15", ad: "Anatomy LAB 1", hoca: "", detay: "Group C"},
        {saat: "11:30-12:15", ad: "Anatomy LAB 2", hoca: "", detay: "Group C"},
        {saat: "13:30-14:15", ad: "Anatomy", hoca: "Gkionoul Nteli Chatzioglou", detay: "Gross Anatomy of Cranium"},
        {saat: "14:30-15:15", ad: "Anatomy", hoca: "Gkionoul Nteli Chatzioglou", detay: "Normas"}
    ],
    "26 ≈ûubat": [
        {saat: "09:30-10:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Trace elements"},
        {saat: "10:30-11:15", ad: "Medical Biochemistry", hoca: "Nihal Y√úCEL", detay: "Ultra trace elements"},
        {saat: "11:30-12:15", ad: "Medical Biology", hoca: "B√ºnyamin BULKURCUOƒûLU", detay: "Chromosomal Alterations and Mutations "},
        {saat: "13:30-14:15", ad: "Anatomy", hoca: "Gkionoul Nteli Chatzioglou", detay: "Joints general information"},
        {saat: "14:30-15:15", ad: "Anatomy", hoca: "Gkionoul Nteli Chatzioglou", detay: "Head-Trunk joints"},
        {saat: "15:30-16:15", ad: "Behavioral Sciences", hoca: "Esra SAVA≈û", detay: ""},
        {saat: "16:30-17:15", ad: "Behavioral Sciences", hoca: "Esra SAVA≈û", detay: ""}
    ],
    "27 ≈ûubat": [
        {saat: "10:30-12:15", ad: "Medical Skills Practice", hoca: "Mustafa YAZICIOƒûLU", detay: "Group J - Classroom A211"}
    ],
    "28 ≈ûubat": [
        {saat: "", ad: "Cumartesi - Tatil", hoca: ""}
    ],
    "1 Mart": [
        {saat: "", ad: "Pazar - Tatil", hoca: ""}
    ],
    "2 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "3 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "4 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "5 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "6 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "7 Mart": [
        {saat: "", ad: "Cumartesi - Tatil", hoca: ""}
    ],
    "8 Mart": [
        {saat: "", ad: "Pazar - Tatil", hoca: ""}
    ],
    "9 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "10 Mart": [
        {saat: "", ad: "Pazar - Tatil", hoca: ""}
    ],
    "11 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "12 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "13 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "14 Mart": [
        {saat: "", ad: "Cumartesi - Tatil", hoca: ""}
    ],
    "15 Mart": [
        {saat: "", ad: "Pazar - Tatil", hoca: ""}
    ],
    "16 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "17 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "18 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ],
    "19 Mart": [
        {saat: "", ad: "", hoca: "", detay: ""}
    ]


};

const shiftInfo = [
    { ad: "G√ºnd√ºz", emoji: "‚òÄÔ∏è" }, { ad: "G√ºnd√ºz", emoji: "‚òÄÔ∏è" },
    { ad: "Gece", emoji: "üåô" }, { ad: "Gece", emoji: "üåô" },
    { ad: "OFF", emoji: "üò¥" }, { ad: "OFF", emoji: "üò¥" }
];

const grid = document.getElementById('calendar-grid');
const overlay = document.getElementById('detail-drawer');

const start = new Date(2026, 1, 19);
const padding = start.getDay() === 0 ? 6 : start.getDay() - 1;

for (let p = 0; p < padding; p++) {
    const empty = document.createElement('div');
    empty.className = 'day-cell empty';
    grid.appendChild(empty);
}

for (let i = 0; i < 29; i++) {
    const d = new Date(2026, 1, 19 + i);
    const dateKey = d.toLocaleDateString('tr-TR', { day: 'numeric', month: 'long' });
    const vIndex = (i + 1) % 6; 
    const v = shiftInfo[vIndex];

    const cell = document.createElement('div');
    cell.className = 'day-cell';
    
    const today = new Date();
    if(today.getDate() === d.getDate() && today.getMonth() === d.getMonth()) cell.classList.add('active');

    cell.innerHTML = `<span class="day-name">${d.toLocaleDateString('tr-TR', {weekday: 'short'})}</span>
                      <strong class="day-num">${d.getDate()}</strong>
                      <span class="v-emoji">${v.emoji}</span>`;

    cell.onclick = () => {
        document.getElementById('selected-date').innerText = dateKey;
        document.getElementById('vakit-imsak').innerText = imsakiye[dateKey]?.imsak || "--:--";
        document.getElementById('vakit-iftar').innerText = imsakiye[dateKey]?.iftar || "--:--";
        document.getElementById('vakit-vardiya').innerText = `${v.emoji} ${v.ad}`;
        
        const list = document.getElementById('vakit-ders-listesi');
        list.innerHTML = "";
        const dersler = dersProgrami[dateKey] || [];
        if(dersler.length > 0) {
            dersler.forEach(item => {
                const div = document.createElement('div');
                div.className = 'lesson-item';
                // Detay varsa hocanƒ±n yanƒ±na ekler, yoksa sadece hocayƒ± yazar
                const ekBilgi = item.detay ? ` ‚Ä¢ ${item.detay}` : ""; 
                div.innerHTML = `<strong>${item.saat} | ${item.ad}</strong>
                                 <small>${item.hoca}${ekBilgi}</small>`;
                list.appendChild(div);
            });
        } else {
            list.innerHTML = "<p style='color:gray; font-size:14px; margin-top:10px;'>Ders programƒ± girilmedi.</p>";
        }
        overlay.classList.add('open');
    };
    grid.appendChild(cell);
}

function closeDrawer() { overlay.classList.remove('open'); }